<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout" layout:decorate="~{mlayout}">

<head>
    <meta charset="utf-8">
    <title>SearchUdata 1.0</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- Le styles -->
    <script type="text/javascript" src="assets/js/jquery.js"></script>

    <!--script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=a4mFsNXw5Laobp35Chq2gWUjgCuGKrGG"></script-->
    <style type="text/css">
        body, html {
            width: 100%;
            height: 100%;
            margin: 0;
            font-family: "微软雅黑";
            font-size: 14px;
        }

        #map {
            width: 100%;
            height: 500px;
            overflow: auto;
        }

        #result {
            width: 100%;
            font-size: 14px;
        }

        li {
            line-height: 28px;
        }

        .cityList {
            height: 320px;
            width: 372px;
            overflow-y: auto;
        }

        .sel_container {
            z-index: 9999;
            font-size: 12px;
            position: absolute;
            right: 0px;
            top: 0px;
            width: 140px;
            background: rgba(255, 255, 255, 0.8);
            height: 30px;
            line-height: 30px;
            padding: 5px;
        }

        .map_popup {
            position: absolute;
            z-index: 200000;
            width: 382px;
            height: 344px;
            right: 0px;
            top: 40px;
        }

        .map_popup .popup_main {
            background: #fff;
            border: 1px solid #8BA4D8;
            height: 100%;
            overflow: hidden;
            position: absolute;
            width: 100%;
            z-index: 2;
        }

        .map_popup .title {
            background: url("http://map.baidu.com/img/popup_title.gif") repeat scroll 0 0 transparent;
            color: #6688CC;
            font-weight: bold;
            height: 24px;
            line-height: 25px;
            padding-left: 7px;
        }

        .map_popup button {
            background: url("http://map.baidu.com/img/popup_close.gif") no-repeat scroll 0 0 transparent;
            cursor: pointer;
            height: 12px;
            position: absolute;
            right: 4px;
            top: 6px;
            width: 12px;
        }

        #r-result {
            width: 100%;
        }
    </style>

    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/loader-style.css">
    <link rel="stylesheet" href="assets/css/bootstrap.css">

    <link rel="stylesheet" href="assets/js/tree/jquery.treeview.css">
    <link rel="stylesheet" href="../red-treeview.css">

    <link rel="stylesheet" href="assets/js/tree/treetable/stylesheets/jquery.treetable.css">
    <link rel="stylesheet" href="assets/js/tree/treetable/stylesheets/jquery.treetable.theme.default.css">

    <link href="assets/js/tree/tabelizer/tabelizer.min.css" media="all" rel="stylesheet" type="text/css">

    <!--加载鼠标绘制工具-->
    <script type="text/javascript"
            src="http://api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.js"></script>
    <link rel="stylesheet" href="http://api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.css"/>
    <!--加载检索信息窗口-->
    <script type="text/javascript"
            src="http://api.map.baidu.com/library/SearchInfoWindow/1.4/src/SearchInfoWindow_min.js"></script>
    <link rel="stylesheet" href="http://api.map.baidu.com/library/SearchInfoWindow/1.4/src/SearchInfoWindow_min.css"/>


    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- Fav and touch icons -->
    <link rel="shortcut icon" href="assets/ico/minus.png">
</head>

<!--  PAPER WRAP -->
<div class="wrap-fluid" layout:fragment="ringhtcontent">
    <div class="container-fluid paper-wrap bevel tlbr">
        <!-- CONTENT -->
        <!--TITLE -->
        <div class="row">
            <div id="paper-top">
                <div class="col-sm-3">
                    <h2 class="tittle-content-header">
                        <i class="icon-view-list"></i>
                            <span>酒店入住情况
                            </span>
                    </h2>

                </div>

                <div class="col-sm-7">
                    <div class="devider-vertical visible-lg"></div>
                    <div class="tittle-middle-header">

                        <div class="alert">
                            <button type="button" class="close" data-dismiss="alert">×</button>
                            <span class="tittle-alert entypo-info-circled"></span>
                            欢迎回来,&nbsp;
                            <strong>周翀!</strong>&nbsp;&nbsp;你最近登入的时间是 昨天下午, 16:54 PM
                        </div>


                    </div>

                </div>

            </div>
        </div>
        <!--/ TITLE -->

        <!-- BREADCRUMB -->
        <ul id="breadcrumb">
            <li>
                <span class="entypo-home"></span>
            </li>
            <li><i class="fa fa-lg fa-angle-right"></i>
            </li>
            <li><a href="#" title="Sample page 1">应用分析</a>
            </li>
            <li><i class="fa fa-lg fa-angle-right"></i>
            </li>
            <li><a href="#" title="Sample page 1">酒店日常运营分析</a>
            </li>
            <li class="pull-right">
                <div class="input-group input-widget">

                    <!--input style="border-radius:15px" type="text" placeholder="Search..." class="form-control"-->


                </div>
            </li>
        </ul>

        <!-- END OF BREADCRUMB -->

        <div id="paper-warp">
            <!--div id="map"></div-->
            <div id="map" style="-webkit-transition: all 0.5s ease-in-out;transition: all 0.5s ease-in-out;"></div>
            <div id="result">
                <button id="open">显示酒店</button>
                <button id="close">关闭酒店</button>
                ==>
                经度: <input id="longitude" type="text" style="width:100px; margin-right:10px; color:red"/>
                纬度: <input id="latitude" type="text" style="width:100px; margin-right:10px; color:red"/>
                <input type="button" value="查询" onclick="theLocation()"/> ==>
                <select id="stylelist" onchange="changeMapStyle(this.value)"></select>
            </div>
            <!--城市列表-->
            <div class="sel_container"><strong id="curCity">北京市</strong> [<a id="curCityText" href="javascript:void(0)">更换城市</a>]
            </div>
            <div class="map_popup" id="cityList" style="display:none;">
                <div class="popup_main">
                    <div class="title">城市列表</div>
                    <div class="cityList" id="citylist_container"></div>
                    <button id="popup_close"></button>
                </div>
            </div>
        </div>


        <div style="height: 100%">
            <!--body style="height: 100%; margin: 0"-->

            <div id="container" style="height: 800px"></div>
            <script type="text/javascript" src="echarts-all-3.js"></script>
            <script type="text/javascript" src="china.js"></script>
            <script th:inline="javascript">
                var data2 = [[${json}]];
                /*var data2;
                 $.ajax({
                 type:"post",
                 async:false,
                 url:"http://localhost:8080/ajax",
                 dataType:"json",
                 success:function(result){
                 // alert(result);
                 data2=result;
                 // alert(data2);
                 },
                 error:function (){
                 alert("请求失败");
                 }
                 });*/
            </script>
            <script type="text/javascript">
                var dom = document.getElementById("container");
                var myChart = echarts.init(dom);
                var app = {};
                option = null;

                var geoCoordMap = {
                    "海门": [121.15, 31.89],
                    "鄂尔多斯": [109.781327, 39.608266],
                    "招远": [120.38, 37.35],
                    "舟山": [122.207216, 29.985295],
                    "齐齐哈尔": [123.97, 47.33],
                    "盐城": [120.13, 33.38],
                    "赤峰": [118.87, 42.28],
                    "青岛": [120.33, 36.07],
                    "乳山": [121.52, 36.89],
                    "金昌": [102.188043, 38.520089],
                    "泉州": [118.58, 24.93],
                    "莱西": [120.53, 36.86],
                    "日照": [119.46, 35.42],
                    "胶南": [119.97, 35.88],
                    "南通": [121.05, 32.08],
                    "拉萨": [91.11, 29.97],
                    "云浮": [112.02, 22.93],
                    "梅州": [116.1, 24.55],
                    "文登": [122.05, 37.2],
                    "上海": [121.48, 31.22],
                    "攀枝花": [101.718637, 26.582347],
                    "威海": [122.1, 37.5],
                    "承德": [117.93, 40.97],
                    "厦门": [118.1, 24.46],
                    "汕尾": [115.375279, 22.786211],
                    "潮州": [116.63, 23.68],
                    "丹东": [124.37, 40.13],
                    "太仓": [121.1, 31.45],
                    "曲靖": [103.79, 25.51],
                    "烟台": [121.39, 37.52],
                    "福州": [119.3, 26.08],
                    "瓦房店": [121.979603, 39.627114],
                    "即墨": [120.45, 36.38],
                    "抚顺": [123.97, 41.97],
                    "玉溪": [102.52, 24.35],
                    "张家口": [114.87, 40.82],
                    "阳泉": [113.57, 37.85],
                    "莱州": [119.942327, 37.177017],
                    "湖州": [120.1, 30.86],
                    "汕头": [116.69, 23.39],
                    "昆山": [120.95, 31.39],
                    "宁波": [121.56, 29.86],
                    "湛江": [110.359377, 21.270708],
                    "揭阳": [116.35, 23.55],
                    "荣成": [122.41, 37.16],
                    "连云港": [119.16, 34.59],
                    "葫芦岛": [120.836932, 40.711052],
                    "常熟": [120.74, 31.64],
                    "东莞": [113.75, 23.04],
                    "河源": [114.68, 23.73],
                    "淮安": [119.15, 33.5],
                    "泰州": [119.9, 32.49],
                    "南宁": [108.33, 22.84],
                    "营口": [122.18, 40.65],
                    "惠州": [114.4, 23.09],
                    "江阴": [120.26, 31.91],
                    "蓬莱": [120.75, 37.8],
                    "韶关": [113.62, 24.84],
                    "嘉峪关": [98.289152, 39.77313],
                    "广州": [113.23, 23.16],
                    "延安": [109.47, 36.6],
                    "太原": [112.53, 37.87],
                    "清远": [113.01, 23.7],
                    "中山": [113.38, 22.52],
                    "昆明": [102.73, 25.04],
                    "寿光": [118.73, 36.86],
                    "盘锦": [122.070714, 41.119997],
                    "长治": [113.08, 36.18],
                    "深圳": [114.07, 22.62],
                    "珠海": [113.52, 22.3],
                    "宿迁": [118.3, 33.96],
                    "咸阳": [108.72, 34.36],
                    "铜川": [109.11, 35.09],
                    "平度": [119.97, 36.77],
                    "佛山": [113.11, 23.05],
                    "海口": [110.35, 20.02],
                    "江门": [113.06, 22.61],
                    "章丘": [117.53, 36.72],
                    "肇庆": [112.44, 23.05],
                    "大连": [121.62, 38.92],
                    "临汾": [111.5, 36.08],
                    "吴江": [120.63, 31.16],
                    "石嘴山": [106.39, 39.04],
                    "沈阳": [123.38, 41.8],
                    "苏州": [120.62, 31.32],
                    "茂名": [110.88, 21.68],
                    "嘉兴": [120.76, 30.77],
                    "长春": [125.35, 43.88],
                    "胶州": [120.03336, 36.264622],
                    "银川": [106.27, 38.47],
                    "张家港": [120.555821, 31.875428],
                    "三门峡": [111.19, 34.76],
                    "锦州": [121.15, 41.13],
                    "南昌": [115.89, 28.68],
                    "柳州": [109.4, 24.33],
                    "三亚": [109.511909, 18.252847],
                    "自贡": [104.778442, 29.33903],
                    "吉林": [126.57, 43.87],
                    "阳江": [111.95, 21.85],
                    "泸州": [105.39, 28.91],
                    "西宁": [101.74, 36.56],
                    "宜宾": [104.56, 29.77],
                    "呼和浩特": [111.65, 40.82],
                    "成都": [104.06, 30.67],
                    "大同": [113.3, 40.12],
                    "镇江": [119.44, 32.2],
                    "桂林": [110.28, 25.29],
                    "张家界": [110.479191, 29.117096],
                    "宜兴": [119.82, 31.36],
                    "北海": [109.12, 21.49],
                    "西安": [108.95, 34.27],
                    "金坛": [119.56, 31.74],
                    "东营": [118.49, 37.46],
                    "牡丹江": [129.58, 44.6],
                    "遵义": [106.9, 27.7],
                    "绍兴": [120.58, 30.01],
                    "扬州": [119.42, 32.39],
                    "常州": [119.95, 31.79],
                    "潍坊": [119.1, 36.62],
                    "重庆": [106.54, 29.59],
                    "台州": [121.420757, 28.656386],
                    "南京": [118.78, 32.04],
                    "滨州": [118.03, 37.36],
                    "贵阳": [106.71, 26.57],
                    "无锡": [120.29, 31.59],
                    "本溪": [123.73, 41.3],
                    "克拉玛依": [84.77, 45.59],
                    "渭南": [109.5, 34.52],
                    "马鞍山": [118.48, 31.56],
                    "宝鸡": [107.15, 34.38],
                    "焦作": [113.21, 35.24],
                    "句容": [119.16, 31.95],
                    "北京": [116.46, 39.92],
                    "徐州": [117.2, 34.26],
                    "衡水": [115.72, 37.72],
                    "包头": [110, 40.58],
                    "绵阳": [104.73, 31.48],
                    "乌鲁木齐": [87.68, 43.77],
                    "枣庄": [117.57, 34.86],
                    "杭州": [120.19, 30.26],
                    "淄博": [118.05, 36.78],
                    "鞍山": [122.85, 41.12],
                    "溧阳": [119.48, 31.43],
                    "库尔勒": [86.06, 41.68],
                    "安阳": [114.35, 36.1],
                    "开封": [114.35, 34.79],
                    "济南": [117, 36.65],
                    "德阳": [104.37, 31.13],
                    "温州": [120.65, 28.01],
                    "九江": [115.97, 29.71],
                    "邯郸": [114.47, 36.6],
                    "临安": [119.72, 30.23],
                    "兰州": [103.73, 36.03],
                    "沧州": [116.83, 38.33],
                    "临沂": [118.35, 35.05],
                    "南充": [106.110698, 30.837793],
                    "天津": [117.2, 39.13],
                    "富阳": [119.95, 30.07],
                    "泰安": [117.13, 36.18],
                    "诸暨": [120.23, 29.71],
                    "郑州": [113.65, 34.76],
                    "哈尔滨": [126.63, 45.75],
                    "聊城": [115.97, 36.45],
                    "芜湖": [118.38, 31.33],
                    "唐山": [118.02, 39.63],
                    "平顶山": [113.29, 33.75],
                    "邢台": [114.48, 37.05],
                    "德州": [116.29, 37.45],
                    "济宁": [116.59, 35.38],
                    "荆州": [112.239741, 30.335165],
                    "宜昌": [111.3, 30.7],
                    "义乌": [120.06, 29.32],
                    "丽水": [119.92, 28.45],
                    "洛阳": [112.44, 34.7],
                    "秦皇岛": [119.57, 39.95],
                    "株洲": [113.16, 27.83],
                    "石家庄": [114.48, 38.03],
                    "莱芜": [117.67, 36.19],
                    "常德": [111.69, 29.05],
                    "保定": [115.48, 38.85],
                    "湘潭": [112.91, 27.87],
                    "金华": [119.64, 29.12],
                    "岳阳": [113.09, 29.37],
                    "长沙": [113, 28.21],
                    "衢州": [118.88, 28.97],
                    "廊坊": [116.7, 39.53],
                    "菏泽": [115.480656, 35.23375],
                    "合肥": [117.27, 31.86],
                    "武汉": [114.31, 30.52],
                    "大庆": [125.03, 46.58]
                };

                var data = data2;
                /* [
                 {name: "海门", value: 9},
                 {name: "鄂尔多斯", value: 12},
                 {name: "招远", value: 12},
                 {name: "舟山", value: 12},
                 {name: "齐齐哈尔", value: 14},
                 {name: "盐城", value: 15},
                 {name: "赤峰", value: 16},
                 {name: "青岛", value: 18},
                 {name: "乳山", value: 18},
                 {name: "金昌", value: 19},
                 {name: "泉州", value: 21},
                 {name: "莱西", value: 21},
                 {name: "日照", value: 21},
                 {name: "胶南", value: 22},
                 {name: "南通", value: 23},
                 {name: "拉萨", value: 24},
                 {name: "云浮", value: 24},
                 {name: "梅州", value: 25},
                 {name: "文登", value: 25},
                 {name: "上海", value: 25},
                 {name: "攀枝花", value: 25},
                 {name: "威海", value: 25},
                 {name: "承德", value: 25},
                 {name: "厦门", value: 26},
                 {name: "汕尾", value: 26},
                 {name: "潮州", value: 26},
                 {name: "丹东", value: 27},
                 {name: "太仓", value: 27},
                 {name: "曲靖", value: 27},
                 {name: "烟台", value: 28},
                 {name: "福州", value: 29},
                 {name: "瓦房店", value: 30},
                 {name: "即墨", value: 30},
                 {name: "抚顺", value: 31},
                 {name: "玉溪", value: 31},
                 {name: "张家口", value: 31},
                 {name: "阳泉", value: 31},
                 {name: "莱州", value: 32},
                 {name: "湖州", value: 32},
                 {name: "汕头", value: 32},
                 {name: "昆山", value: 33},
                 {name: "宁波", value: 33},
                 {name: "湛江", value: 33},
                 {name: "揭阳", value: 34},
                 {name: "荣成", value: 34},
                 {name: "连云港", value: 35},
                 {name: "葫芦岛", value: 35},
                 {name: "常熟", value: 36},
                 {name: "东莞", value: 36},
                 {name: "河源", value: 36},
                 {name: "淮安", value: 36},
                 {name: "泰州", value: 36},
                 {name: "南宁", value: 37},
                 {name: "营口", value: 37},
                 {name: "惠州", value: 37},
                 {name: "江阴", value: 37},
                 {name: "蓬莱", value: 37},
                 {name: "韶关", value: 38},
                 {name: "嘉峪关", value: 38},
                 {name: "广州", value: 38},
                 {name: "延安", value: 38},
                 {name: "太原", value: 39},
                 {name: "清远", value: 39},
                 {name: "中山", value: 39},
                 {name: "昆明", value: 39},
                 {name: "寿光", value: 40},
                 {name: "盘锦", value: 40},
                 {name: "长治", value: 41},
                 {name: "深圳", value: 41},
                 {name: "珠海", value: 42},
                 {name: "宿迁", value: 43},
                 {name: "咸阳", value: 43},
                 {name: "铜川", value: 44},
                 {name: "平度", value: 44},
                 {name: "佛山", value: 44},
                 {name: "海口", value: 44},
                 {name: "江门", value: 45},
                 {name: "章丘", value: 45},
                 {name: "肇庆", value: 46},
                 {name: "大连", value: 47},
                 {name: "临汾", value: 47},
                 {name: "吴江", value: 47},
                 {name: "石嘴山", value: 49},
                 {name: "沈阳", value: 50},
                 {name: "苏州", value: 50},
                 {name: "茂名", value: 50},
                 {name: "嘉兴", value: 51},
                 {name: "长春", value: 51},
                 {name: "胶州", value: 52},
                 {name: "银川", value: 52},
                 {name: "张家港", value: 52},
                 {name: "三门峡", value: 53},
                 {name: "锦州", value: 54},
                 {name: "南昌", value: 54},
                 {name: "柳州", value: 54},
                 {name: "三亚", value: 54},
                 {name: "自贡", value: 56},
                 {name: "吉林", value: 56},
                 {name: "阳江", value: 57},
                 {name: "泸州", value: 57},
                 {name: "西宁", value: 57},
                 {name: "宜宾", value: 58},
                 {name: "呼和浩特", value: 58},
                 {name: "成都", value: 58},
                 {name: "大同", value: 58},
                 {name: "镇江", value: 59},
                 {name: "桂林", value: 59},
                 {name: "张家界", value: 59},
                 {name: "宜兴", value: 59},
                 {name: "北海", value: 60},
                 {name: "西安", value: 61},
                 {name: "金坛", value: 62},
                 {name: "东营", value: 62},
                 {name: "牡丹江", value: 63},
                 {name: "遵义", value: 63},
                 {name: "绍兴", value: 63},
                 {name: "扬州", value: 64},
                 {name: "常州", value: 64},
                 {name: "潍坊", value: 65},
                 {name: "重庆", value: 66},
                 {name: "台州", value: 67},
                 {name: "南京", value: 67},
                 {name: "滨州", value: 70},
                 {name: "贵阳", value: 71},
                 {name: "无锡", value: 71},
                 {name: "本溪", value: 71},
                 {name: "克拉玛依", value: 72},
                 {name: "渭南", value: 72},
                 {name: "马鞍山", value: 72},
                 {name: "宝鸡", value: 72},
                 {name: "焦作", value: 75},
                 {name: "句容", value: 75},
                 {name: "北京", value: 79},
                 {name: "徐州", value: 79},
                 {name: "衡水", value: 80},
                 {name: "包头", value: 80},
                 {name: "绵阳", value: 80},
                 {name: "乌鲁木齐", value: 84},
                 {name: "枣庄", value: 84},
                 {name: "杭州", value: 84},
                 {name: "淄博", value: 85},
                 {name: "鞍山", value: 86},
                 {name: "溧阳", value: 86},
                 {name: "库尔勒", value: 86},
                 {name: "安阳", value: 90},
                 {name: "开封", value: 90},
                 {name: "济南", value: 92},
                 {name: "德阳", value: 93},
                 {name: "温州", value: 95},
                 {name: "九江", value: 96},
                 {name: "邯郸", value: 98},
                 {name: "临安", value: 99},
                 {name: "兰州", value: 99},
                 {name: "沧州", value: 100},
                 {name: "临沂", value: 103},
                 {name: "南充", value: 104},
                 {name: "天津", value: 105},
                 {name: "富阳", value: 106},
                 {name: "泰安", value: 112},
                 {name: "诸暨", value: 112},
                 {name: "郑州", value: 113},
                 {name: "哈尔滨", value: 114},
                 {name: "聊城", value: 116},
                 {name: "芜湖", value: 117},
                 {name: "唐山", value: 119},
                 {name: "平顶山", value: 119},
                 {name: "邢台", value: 119},
                 {name: "德州", value: 120},
                 {name: "济宁", value: 120},
                 {name: "荆州", value: 127},
                 {name: "宜昌", value: 130},
                 {name: "义乌", value: 132},
                 {name: "丽水", value: 133},
                 {name: "洛阳", value: 134},
                 {name: "秦皇岛", value: 136},
                 {name: "株洲", value: 143},
                 {name: "石家庄", value: 147},
                 {name: "莱芜", value: 148},
                 {name: "常德", value: 152},
                 {name: "保定", value: 153},
                 {name: "湘潭", value: 154},
                 {name: "金华", value: 157},
                 {name: "岳阳", value: 169},
                 {name: "长沙", value: 175},
                 {name: "衢州", value: 177},
                 {name: "廊坊", value: 193},
                 {name: "菏泽", value: 194},
                 {name: "合肥", value: 229},
                 {name: "武汉", value: 273},
                 {name: "大庆", value: 279}
                 ];*/

                var convertData = function (data) {
                    var res = [];
                    for (var i = 0; i < data.length; i++) {
                        var geoCoord = geoCoordMap[data[i].name];
                        if (geoCoord) {
                            res.push({
                                name: data[i].name,
                                value: geoCoord.concat(data[i].value)
                            });
                        }
                    }
                    return res;
                };

                var convertedData = [
                    convertData(data),
                    convertData(data.sort(function (a, b) {
                        return b.value - a.value;
                    }).slice(0, 6))
                ];


                option = {
                    backgroundColor: '#404a59',
                    animation: true,
                    animationDuration: 1000,
                    animationEasing: 'cubicInOut',
                    animationDurationUpdate: 1000,
                    animationEasingUpdate: 'cubicInOut',
                    title: [
                        {
                            text: '全国酒店入住情况',
                            subtext: 'SearchUdata',
                            sublink: 'http://www.umessage.com.cn',
                            left: 'center',
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        {
                            id: 'statistic',
                            right: 120,
                            top: 40,
                            width: 100,
                            textStyle: {
                                color: '#fff',
                                fontSize: 16
                            }
                        }
                    ],
                    toolbox: {
                        iconStyle: {
                            normal: {
                                borderColor: '#fff'
                            },
                            emphasis: {
                                borderColor: '#b1e4ff'
                            }
                        }
                    },
                    brush: {
                        outOfBrush: {
                            color: '#abc'
                        },
                        brushStyle: {
                            borderWidth: 2,
                            color: 'rgba(0,0,0,0.2)',
                            borderColor: 'rgba(0,0,0,0.5)',
                        },
                        seriesIndex: [0, 1],
                        throttleType: 'debounce',
                        throttleDelay: 300,
                        geoIndex: 0
                    },
                    geo: {
                        map: 'china',
                        left: '10',
                        right: '35%',
                        center: [117.98561551896913, 31.205000490896193],
                        zoom: 2.5,
                        label: {
                            emphasis: {
                                show: false
                            }
                        },
                        roam: true,
                        itemStyle: {
                            normal: {
                                areaColor: '#323c48',
                                borderColor: '#111'
                            },
                            emphasis: {
                                areaColor: '#2a333d'
                            }
                        }
                    },
                    tooltip: {
                        trigger: 'item'
                    },
                    grid: {
                        right: 40,
                        top: 100,
                        bottom: 40,
                        width: '30%'
                    },
                    xAxis: {
                        type: 'value',
                        scale: true,
                        position: 'top',
                        boundaryGap: false,
                        splitLine: {show: false},
                        axisLine: {show: false},
                        axisTick: {show: false},
                        axisLabel: {margin: 2, textStyle: {color: '#aaa'}},
                    },
                    yAxis: {
                        type: 'category',
                        name: 'TOP 20',
                        nameGap: 16,
                        axisLine: {show: false, lineStyle: {color: '#ddd'}},
                        axisTick: {show: false, lineStyle: {color: '#ddd'}},
                        axisLabel: {interval: 0, textStyle: {color: '#ddd'}},
                        data: []
                    },
                    series: [
                        {
                            name: 'PM2.5}',
                            type: 'scatter',
                            coordinateSystem: 'geo',
                            data: convertedData[0],
                            symbolSize: function (val) {
                                return Math.max(val[2] / 10, 8);
                            },
                            label: {
                                normal: {
                                    formatter: '{b}',
                                    position: 'right',
                                    show: false
                                },
                                emphasis: {
                                    show: true
                                }
                            },
                            itemStyle: {
                                normal: {
                                    color: '#ddb926'
                                }
                            }
                        },
                        {
                            name: 'Top 5',
                            type: 'effectScatter',
                            coordinateSystem: 'geo',
                            data: convertedData[1],
                            symbolSize: function (val) {
                                return Math.max(val[2] / 10, 8);
                            },
                            showEffectOn: 'emphasis',
                            rippleEffect: {
                                brushType: 'stroke'
                            },
                            hoverAnimation: true,
                            label: {
                                normal: {
                                    formatter: '{b}',
                                    position: 'right',
                                    show: true
                                }
                            },
                            itemStyle: {
                                normal: {
                                    color: '#f4e925',
                                    shadowBlur: 10,
                                    shadowColor: '#333'
                                }
                            },
                            zlevel: 1
                        },
                        {
                            id: 'bar',
                            zlevel: 2,
                            type: 'bar',
                            symbol: 'none',
                            itemStyle: {
                                normal: {
                                    color: '#ddb926'
                                }
                            },
                            data: []
                        }
                    ]
                };


                myChart.on('brushselected', renderBrushed);

                // myChart.setOption(option);

                setTimeout(function () {
                    myChart.dispatchAction({
                        type: 'brush',
                        areas: [
                            {
                                geoIndex: 0,
                                brushType: 'polygon',
                                coordRange: [[${range}]]
                            }
                        ]
                    });
                }, 0);


                function renderBrushed(params) {
                    var mainSeries = params.batch[0].selected[0];

                    var selectedItems = [];
                    var categoryData = [];
                    var barData = [];
                    var maxBar = 30;
                    var sum = 0;
                    var count = 0;

                    for (var i = 0; i < mainSeries.dataIndex.length; i++) {
                        var rawIndex = mainSeries.dataIndex[i];
                        var dataItem = convertedData[0][rawIndex];
                        var pmValue = dataItem.value[2];

                        sum += pmValue;
                        count++;

                        selectedItems.push(dataItem);
                    }

                    selectedItems.sort(function (a, b) {
                        return a.value[2] - b.value[2];
                    });

                    for (var i = 0; i < Math.min(selectedItems.length, maxBar); i++) {
                        categoryData.push(selectedItems[i].name);
                        barData.push(selectedItems[i].value[2]);
                    }

                    this.setOption({
                        yAxis: {
                            data: categoryData
                        },
                        xAxis: {
                            axisLabel: {show: !!count}
                        },
                        title: {
                            id: 'statistic',
                            text: count ? '平均: ' + (sum / count).toFixed(4) : ''
                        },
                        series: {
                            id: 'bar',
                            data: barData
                        }
                    });
                }
                if (option && typeof option === "object") {
                    myChart.setOption(option, true);
                }
            </script>
        </div>
        <!--/body-->


        <!-- /END OF CONTENT -->


        <!-- FOOTER -->
        <div class="footer-space"></div>
        <div id="footer">
            <div class="devider-footer-left"></div>
            <div class="time">
                <p id="spanDate">
                <p id="clock">
            </div>
            <div class="copyright">技术支持
                <span class="entypo-heart"></span>Contact from <a href="index.html" title="SearchUdata DMP"
                                                                  target="_blank">umessage.com.cn</a> All Rights
                Reserved
            </div>
            <div class="devider-footer"></div>

        </div>
        <!-- / END OF FOOTER -->

    </div>
</div>
<!--  END OF PAPER WRAP -->
<!-- RIGHT SLIDER CONTENT -->
<div class="sb-slidebar sb-right">
    <div class="right-wrapper">
        <div class="row">
            <h3>
                <span><i class="entypo-gauge"></i>&nbsp;&nbsp;MAIN WIDGET</span>
            </h3>
            <div class="col-sm-12">

                <div class="widget-knob">
                        <span class="chart" style="position:relative" data-percent="86">
                            <span class="percent"></span>
                        </span>
                </div>
                <div class="widget-def">
                    <b>Distance traveled</b>
                    <br>
                    <i>86% to the check point</i>
                </div>

                <div class="widget-knob">
                        <span class="speed-car" style="position:relative" data-percent="60">
                            <span class="percent2"></span>
                        </span>
                </div>
                <div class="widget-def">
                    <b>The average speed</b>
                    <br>
                    <i>30KM/h avarage speed</i>
                </div>


                <div class="widget-knob">
                        <span class="overall" style="position:relative" data-percent="25">
                            <span class="percent3"></span>
                        </span>
                </div>
                <div class="widget-def">
                    <b>Overall result</b>
                    <br>
                    <i>30KM/h avarage Result</i>
                </div>
            </div>
        </div>
    </div>

    <div style="margin-top:0;" class="right-wrapper">
        <div class="row">
            <h3>
                <span><i class="entypo-chat"></i>&nbsp;&nbsp;CHAT</span>
            </h3>
            <div class="col-sm-12">
                <span class="label label-warning label-chat">Online</span>
                <ul class="chat">
                    <li>
                        <a href="#">
                                <span>
                                    <img alt="" class="img-chat img-circle"
                                         src="http://api.randomuser.me/portraits/thumb/men/20.jpg">
                                </span><b>龙通彬</b>
                            <br><i>Last seen : 08:00 PM</i>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                                <span>
                                    <img alt="" class="img-chat img-circle"
                                         src="http://api.randomuser.me/portraits/thumb/men/21.jpg">
                                </span><b>李常在</b>
                            <br><i>Last seen : 07:21 PM</i>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                                <span>
                                    <img alt="" class="img-chat img-circle"
                                         src="http://api.randomuser.me/portraits/thumb/men/22.jpg">
                                </span><b>赵新志</b>
                            <br><i>Last seen : 05:43 PM</i>
                        </a>
                    </li>


                </ul>

                <span class="label label-chat">Offline</span>
                <ul class="chat">
                    <li>
                        <a href="#">
                                <span>
                                    <img alt="" class="img-chat img-offline img-circle"
                                         src="http://api.randomuser.me/portraits/thumb/men/23.jpg">
                                </span><b>张阳</b>
                            <br><i>Last seen : 08:00 PM</i>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                                <span>
                                    <img alt="" class="img-chat img-offline img-circle"
                                         src="http://api.randomuser.me/portraits/thumb/women/24.jpg">
                                </span><b>杨宝宁</b>
                            <br><i>Last seen : 07:21 PM</i>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                                <span>
                                    <img alt="" class="img-chat img-offline img-circle"
                                         src="http://api.randomuser.me/portraits/thumb/men/25.jpg">
                                </span><b>王卫哲</b>
                            <br><i>Last seen : 05:43 PM</i>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                                <span>
                                    <img alt="" class="img-chat img-offline img-circle"
                                         src="http://api.randomuser.me/portraits/thumb/women/25.jpg">
                                </span><b>王凯</b>
                            <br><i>Last seen : 07:21 PM</i>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                                <span>
                                    <img alt="" class="img-chat img-offline img-circle"
                                         src="http://api.randomuser.me/portraits/thumb/men/26.jpg">
                                </span><b>曾毅</b>
                            <br><i>Last seen : 05:43 PM</i>
                        </a>
                    </li>


                </ul>
            </div>
        </div>
    </div>
</div>

<!-- END OF RIGHT SLIDER CONTENT-->


<div layout:fragment="ringhtfooter">
    <!-- MAIN EFFECT -->
    <script type="text/javascript" src="assets/js/preloader.js"></script>
    <script type="text/javascript" src="assets/js/bootstrap.js"></script>
    <script type="text/javascript" src="assets/js/app.js"></script>
    <script type="text/javascript" src="assets/js/load.js"></script>

    <script type="text/javascript" src="assets/js/main.js"></script>

    <!--script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=jYNU39RZ3k37NUz1QduizaYD"></script-->
    <script type="text/javascript"
            src="http://api.map.baidu.com/api?v=2.0&ak=A4749739227af1618f7b0d1b588c0e85"></script>

    <!-- 加载百度地图样式信息窗口 -->
    <script type="text/javascript"
            src="http://api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.js"></script>
    <link rel="stylesheet" href="http://api.map.baidu.com/library/SearchInfoWindow/1.5/src/SearchInfoWindow_min.css"/>
    <!-- 加载城市列表 -->
    <script type="text/javascript" src="http://api.map.baidu.com/library/CityList/1.2/src/CityList_min.js"></script>
    <link href="http://api.map.baidu.com/library/TrafficControl/1.4/src/TrafficControl_min.css" rel="stylesheet"
          type="text/css"/>
    <script type="text/javascript"
            src="http://api.map.baidu.com/library/TrafficControl/1.4/src/TrafficControl_min.js"></script>
    <script type="text/javascript" src="http://developer.baidu.com/map/custom/stylelist.js"></script>


    <script type="text/javascript" src="map.js"></script>


    <!-- /MAIN EFFECT -->
    <script src="assets/js/tree/lib/jquery.cookie.js" type="text/javascript"></script>
    <script src="assets/js/tree/jquery.treeview.js" type="text/javascript"></script>


    <script src="assets/js/tree/tabelizer/jquery-ui-1.10.4.custom.min.js"></script>
    <script src="assets/js/tree/tabelizer/jquery.tabelizer.js"></script>

    <script src="assets/js/tree/treetable/vendor/jquery-ui.js"></script>
    <script src="assets/js/tree/treetable/javascripts/src/jquery.treetable.js"></script>

    <script type="text/javascript">
        $(function () {
            $("#browser, #browser2").treeview({
                animated: "fast",
                collapsed: false,
                unique: true,
                persist: "cookie",
                toggle: function () {
                    window.console && console.log("%o was toggled", this);
                }
            });
        });
    </script>

    <script>
        $("#example-basic").treetable({
            expandable: true
        });

        $("#example-basic-static").treetable();

        $("#example-basic-expandable").treetable({
            expandable: true
        });

        $("#example-advanced").treetable({
            expandable: true
        });

        // Highlight selected row
        $("#example-advanced tbody").on("mousedown", "tr", function () {
            $(".selected").not(this).removeClass("selected");
            $(this).toggleClass("selected");
        });

        // Drag & Drop Example Code
        $("#example-advanced .file, #example-advanced .folder").draggable({
            helper: "clone",
            opacity: .75,
            refreshPositions: true, // Performance?
            revert: "invalid",
            revertDuration: 300,
            expandable: true,
            scroll: true
        });

        $("#example-advanced .folder").each(function () {
            $(this).parents("#example-advanced tr").droppable({
                accept: ".file, .folder",
                drop: function (e, ui) {
                    var droppedEl = ui.draggable.parents("tr");
                    $("#example-advanced").treetable("move", droppedEl.data("ttId"), $(this).data("ttId"));
                },
                hoverClass: "accept",
                over: function (e, ui) {
                    var droppedEl = ui.draggable.parents("tr");
                    if (this != droppedEl[0] && !$(this).is(".expanded")) {
                        $("#example-advanced").treetable("expandNode", $(this).data("ttId"));
                    }
                }
            });
        });

        $("form#reveal").submit(function () {
            var nodeId = $("#revealNodeId").val()

            try {
                $("#example-advanced").treetable("reveal", nodeId);
            } catch (error) {
                alert(error.message);
            }

            return false;
        });
    </script>

    <script>
        $(document).ready(function () {
            var table1 = $('#table1').tabelize({
                /*onRowClick : function(){
                 alert('test');
                 }*/
                fullRowClickable: true,
                onReady: function () {
                    console.log('ready');
                },
                onBeforeRowClick: function () {
                    console.log('onBeforeRowClick');
                },
                onAfterRowClick: function () {
                    console.log('onAfterRowClick');
                },
            });
        });
    </script>

    <script>

        var str;
        var substr = /<\/span>.*/g;
        document.getElementById("container").onmouseout = function (e) {

            if ((e.target || window.event.srcElement).tagName.toLowerCase() === 'div') {

                str = (e.target || window.event.srcElement).innerHTML.match(substr);

                document.getElementById("longitude").value = str;
                abc = document.getElementById("longitude").value;
                document.getElementById("longitude").value = abc.substring(abc.indexOf(":") + 2, abc.indexOf(",")); //取出经度
                var tempArr = abc.split(",");
                var b = tempArr[1];
                document.getElementById("latitude").value = b; //取出维度

                return false;

            }

            return false;

        };
    </script>


</div>

